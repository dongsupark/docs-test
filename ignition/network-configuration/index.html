<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Network configuration - Flatcar Container Linux Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Flatcar Container Linux Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                <!--Only display pages not under the hidden tag in mkdocs.yml-->
                        <li >
                            <a href="../..">Home</a>
                        </li>
                <!--Only display pages not under the hidden tag in mkdocs.yml-->
                        <li >
                            <a href="../../os/quickstart/">Quick start</a>
                        </li>
                <!--Only display pages not under the hidden tag in mkdocs.yml-->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Navigation <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                
  <li class="dropdown-submenu">
    <a href="#">Provisioning</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/provisioning/">Using Container Linux Config</a>
</li>
            
<li >
    <a href="../../container-linux-config-transpiler/doc/overview/">Using Config Transpiler</a>
</li>
            
<li >
    <a href="../../container-linux-config-transpiler/doc/dynamic-data/">CL Config Dynamic Data</a>
</li>
            
<li >
    <a href="../../container-linux-config-transpiler/doc/examples/">CL Config Examples</a>
</li>
            
<li >
    <a href="../../container-linux-config-transpiler/doc/configuration/">CL Config Spec</a>
</li>
    </ul>
  </li>
                                
  <li class="dropdown-submenu">
    <a href="#">Cloud Providers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/booting-on-ec2/">Amazon EC2</a>
</li>
            
<li >
    <a href="../../os/booting-on-azure/">Azure</a>
</li>
            
<li >
    <a href="../../os/booting-on-digitalocean/">Digital Ocean</a>
</li>
            
<li >
    <a href="../../os/booting-on-google-compute-engine/">Google Compute Engine</a>
</li>
            
<li >
    <a href="../../os/booting-with-qemu/">QEMU</a>
</li>
    </ul>
  </li>
                                
  <li class="dropdown-submenu">
    <a href="#">Bare Metal</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/booting-with-ipxe/">Booting with iPXE</a>
</li>
            
<li >
    <a href="../../os/booting-with-pxe/">Booting with PXE</a>
</li>
            
<li >
    <a href="../../os/installing-to-disk/">Installing to Disk</a>
</li>
            
<li >
    <a href="../../os/booting-with-iso/">Booting from ISO</a>
</li>
            
<li >
    <a href="../../os/root-filesystem-placement/">Root filesystem placement</a>
</li>
    </ul>
  </li>
                                
  <li class="dropdown-submenu">
    <a href="#">Migrating from CoreOS Container Linux</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/migrate-from-container-linux/">Migrating from CoreOS Container Linux</a>
</li>
            
<li >
    <a href="../../os/update-from-container-linux/">Updating from CoreOS Container Linux</a>
</li>
    </ul>
  </li>
                                
  <li class="dropdown-submenu">
    <a href="#">Working with Clusters</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Creating Clusters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/cluster-architectures/">Cluster architectures</a>
</li>
            
<li >
    <a href="../../os/update-strategies/">Update strategies</a>
</li>
            
<li >
    <a href="../../os/cluster-discovery/">Clustering machines</a>
</li>
            
<li >
    <a href="../../os/verify-images/">Verify Flatcar Container Linux Images with GPG</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Customizing Clusters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/network-config-with-networkd/">Using networkd to customize networking</a>
</li>
            
<li >
    <a href="../../os/using-systemd-drop-in-units/">Using systemd drop-in units</a>
</li>
            
<li >
    <a href="../../os/using-environment-variables-in-systemd-units/">Using environment variables in systemd units</a>
</li>
            
<li >
    <a href="../../os/configuring-dns/">Configuring DNS</a>
</li>
            
<li >
    <a href="../../os/configuring-date-and-timezone/">Configuring date & timezone</a>
</li>
            
<li >
    <a href="../../os/adding-users/">Adding users</a>
</li>
            
<li >
    <a href="../../os/other-settings/">Kernel modules / sysctl parameters</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Scaling Clusters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/adding-disk-space/">Adding disk space</a>
</li>
            
<li >
    <a href="../../os/mounting-storage/">Mounting storage</a>
</li>
            
<li >
    <a href="../../os/power-management/">Power management</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Managing Clusters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/registry-authentication/">Registry authentication</a>
</li>
            
<li >
    <a href="../../os/iscsi/">iSCSI configuration</a>
</li>
            
<li >
    <a href="../../os/adding-swap/">Adding swap</a>
</li>
            
<li >
    <a href="../../os/booting-on-ecs/">Amazon EC2 Container Service</a>
</li>
            
<li >
    <a href="../../os/getting-started-with-systemd/">Using systemd to manage Docker containers</a>
</li>
            
<li >
    <a href="../../os/using-systemd-and-udev-rules/">Using systemd and udev rules</a>
</li>
            
<li >
    <a href="../../os/switching-channels/">Switching release channels</a>
</li>
            
<li >
    <a href="../../os/scheduling-tasks-with-systemd-timers/">Scheduling tasks with systemd</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Securing Clusters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/customizing-sshd/">Customizing the SSH daemon</a>
</li>
            
<li >
    <a href="../../os/sssd/">Configuring SSSD on Flatcar Container Linux</a>
</li>
            
<li >
    <a href="../../os/hardening-guide/">Hardening a Flatcar Container Linux machine</a>
</li>
            
<li >
    <a href="../../os/trusted-computing-hardware-requirements/">Trusted Computing Hardware Requirements</a>
</li>
            
<li >
    <a href="../../os/adding-certificate-authorities/">Adding Cert Authorities</a>
</li>
            
<li >
    <a href="../../os/selinux/">Using SELinux</a>
</li>
            
<li >
    <a href="../../os/disabling-smt/">Disabling SMT</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Debugging Clusters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/install-debugging-tools/">Install debugging tools</a>
</li>
            
<li >
    <a href="../../os/btrfs-troubleshooting/">Working with btrfs</a>
</li>
            
<li >
    <a href="../../os/reading-the-system-log/">Reading the system log</a>
</li>
            
<li >
    <a href="../../os/collecting-crash-logs/">Collecting crash logs</a>
</li>
            
<li >
    <a href="../../os/manual-rollbacks/">Manual Flatcar Container Linux rollbacks</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                
  <li class="dropdown-submenu">
    <a href="#">Container Runtimes</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Docker</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../os/getting-started-with-docker/">Getting started with Docker</a>
</li>
            
<li >
    <a href="../../os/customizing-docker/">Customizing Docker</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                            </ul>
                        </li>
                <!--Only display pages not under the hidden tag in mkdocs.yml-->
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../metadata/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../what-is-ignition/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#network-configuration">Network configuration</a></li>
            <li><a href="#static-networking">Static networking</a></li>
            <li><a href="#bonded-nics">Bonded NICs</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="network-configuration">Network configuration<a class="headerlink" href="#network-configuration" title="Permanent link">&para;</a></h1>
<p>Configuring networkd with Ignition is a very straightforward task. Because Ignition runs before networkd starts, configuration is just a matter of writing the desired config to disk. The Ignition config has a specific section dedicated to this.</p>
<p>Each of these examples is written in version 2.0.0 of the config. Ensure that any configuration matches the version that Ignition expects.</p>
<h2 id="static-networking">Static networking<a class="headerlink" href="#static-networking" title="Permanent link">&para;</a></h2>
<p>In this example, the network interface with the name "eth0" will be given the IP address 10.0.1.7. A typical interface will need more configuration and may use all of the options of a <a href="http://www.freedesktop.org/software/systemd/man/systemd.network.html">network unit</a>.</p>
<pre class="codehilite"><code class="language-json">{
  &quot;ignition&quot;: { &quot;version&quot;: &quot;2.0.0&quot; },
  &quot;networkd&quot;: {
    &quot;units&quot;: [{
      &quot;name&quot;: &quot;00-eth0.network&quot;,
      &quot;contents&quot;: &quot;[Match]\nName=eth0\n\n[Network]\nAddress=10.0.1.7&quot;
    }]
  }
}</code></pre>

<p>This configuration will instruct Ignition to create a single network unit named "00-eth0.network" with the contents:</p>
<pre class="codehilite"><code class="language-ini">[Match]
Name=eth0

[Network]
Address=10.0.1.7</code></pre>

<p>When the system boots, networkd will read this config and assign the IP address to eth0.</p>
<h3 id="using-static-ip-addresses-with-ignition">Using static IP addresses with Ignition<a class="headerlink" href="#using-static-ip-addresses-with-ignition" title="Permanent link">&para;</a></h3>
<p>Because Ignition writes network configuration to disk for networkd to use later, statically-configured interfaces will be brought online only after Ignition has run. If static IP configuration is required to download remote configs before Ignition has run, use one of the following two forms of supported kernel command-line arguments.</p>
<p>This format can configure a static IP address on the named interface, or on all interfaces when unspecified.</p>
<ul>
<li><code class="codehilite">ip=</code> to specify the IP address, for example <code class="codehilite">ip=10.0.2.42</code></li>
<li><code class="codehilite">netmask=</code> to specify the netmask, for example <code class="codehilite">netmask=255.255.255.0</code></li>
<li><code class="codehilite">gateway=</code> to specify the gateway address, for example <code class="codehilite">gateway=10.0.2.2</code></li>
<li><code class="codehilite">ksdevice=</code> (optional) to limit configuration to the named interface, for example <code class="codehilite">ksdevice=eth0</code></li>
</ul>
<p>This format can be specified multiple times to apply unique static configuration to different interfaces. Omitting the <code class="codehilite">&lt;iface&gt;</code> parameter will apply the configuration to all interfaces that have not yet been configured.</p>
<ul>
<li><code class="codehilite">ip=&lt;ip&gt;::&lt;gateway&gt;:&lt;netmask&gt;:&lt;hostname&gt;:&lt;iface&gt;:none[:&lt;dns1&gt;[:&lt;dns2&gt;]]</code>, for example <code class="codehilite">ip=10.0.2.42::10.0.2.2:255.255.255.0::eth0:none:8.8.8.8:8.8.4.4</code></li>
</ul>
<h2 id="bonded-nics">Bonded NICs<a class="headerlink" href="#bonded-nics" title="Permanent link">&para;</a></h2>
<p>In this example, all of the network interfaces whose names begin with "eth" will be bonded together to form "bond0". This new interface will then be configured to use DHCP.</p>
<pre class="codehilite"><code class="language-json">{
  &quot;ignition&quot;: { &quot;version&quot;: &quot;2.0.0&quot; },
  &quot;networkd&quot;: {
    &quot;units&quot;: [
      {
        &quot;name&quot;: &quot;00-eth.network&quot;,
        &quot;contents&quot;: &quot;[Match]\nName=eth*\n\n[Network]\nBond=bond0&quot;
      },
      {
        &quot;name&quot;: &quot;10-bond0.netdev&quot;,
        &quot;contents&quot;: &quot;[NetDev]\nName=bond0\nKind=bond&quot;
      },
      {
        &quot;name&quot;: &quot;20-bond0.network&quot;,
        &quot;contents&quot;: &quot;[Match]\nName=bond0\n\n[Network]\nDHCP=true&quot;
      }
    ]
  }
}</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
